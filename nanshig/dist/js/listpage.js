"use strict";$(function(){$("h1").on("click",function(){location.href="../index.html"});var e=decodeURI(location.search.slice(1)),d=1,a="id";function i(){ajax({type:"get",url:"../api/listpage.php",data:{name:e,ipage:d,pages:8,rank:a},success:function(e){var a=JSON.parse(e),i=a.list.map(function(e){var a=e.simg.split(";").map(function(e){return'<li><img src="'+e+'" alt=""></li>'}).join("");return'\n                <li class="items" index="'+e.id+'">\n                    <div class="itemscon">\n                        <div class="goodsimg"><img src="'+e.bimg+'" alt=""></div>\n                        <div class="goodsinfo">\n                            <ul class="simg">'+a+'</ul>\n                            <p class="title"  index="'+e.id+'"><a href="javascript:void(0)">'+e.title+'</a></p>\n                            <div class="pricebox">\n                                <p>\n                                    <span class="price">￥'+e.price+'</span>\n                                    <del class="mprice">￥'+e.mprice+'</del>\n                                </p>\n                                <div>\n                                    <img src="../img/star.png" alt=""><br>\n                                    <a href="javascript:void(0)">\n                                        <input type="checkbox">加入对比\n                                    </a>\n                                </div>\n                            </div>\n                            <ul class="sell">\n                                <li>\n                                    <p>'+e.status+"</p>\n                                    <p>商品销量</p>\n                                </li>\n                                <li>\n                                    <p>"+e.status+'</p>\n                                    <p>用户评论</p>\n                                </li>\n                            </ul>\n                            <p class="master">\n                                <a href="javascript:void(0)">'+e.name+'</a>\n                            </p>\n                            <a href="javascript:void(0)" class="addcar"><span\n                                    class="iconfont iconicon-test11"></span>加入购物车</a>\n                        </div>\n                    </div>\n                </li>'}).join("");$("#goodslist").html(i);for(var s=Math.ceil(a.num/8),t="",n=0;n<s;n++)t+="<li>"+(n+1)+"</li>";$("#pagenum").html(t).children().eq(d-1).addClass("active");var l=a.list2.map(function(e){return'<li>\n                        <img src="'+e.bimg+'" alt="">\n                        <div class="recomdetail">\n                            <p class="title">'+e.title+'</p>\n                            <p class="price">商城价:<span>￥'+e.price+'</span></p>\n                            <a href="javascript:void(0)" index="'+e.id+'">立即抢购</a>\n                        </div>\n                    </li>'}).join("");$("#recommendlist").html(l),$("#recommendlist").on("click","a",function(){location.href="detailpage.html?"+decodeURI(location.search.slice(1))+"&"+this.attributes.index.nodeValue})}})}$("#next").on("click",function(){d<$("#pagenum").children().length&&($("#prev").removeClass("ui-state-disabled"),$("#firstpage").removeClass("ui-state-disabled"),d++,i(),d==$("#pagenum").children().length&&($("#next").addClass("ui-state-disabled"),$("#lastpage").addClass("ui-state-disabled")))}),$("#prev").on("click",function(){1<d&&($("#next").removeClass("ui-state-disabled"),$("#lastpage").removeClass("ui-state-disabled"),d--,i(),1==d&&($("#prev").addClass("ui-state-disabled"),$("#firstpage").addClass("ui-state-disabled")))}),$("#firstpage").on("click",function(){d=1,i(),$("#firstpage").addClass("ui-state-disabled"),$("#prev").addClass("ui-state-disabled"),$("#lastpage").removeClass("ui-state-disabled"),$("#next").removeClass("ui-state-disabled")}),$("#lastpage").on("click",function(){d=$("#pagenum").children().length,i(),$("#lastpage").addClass("ui-state-disabled"),$("#next").addClass("ui-state-disabled"),$("#firstpage").removeClass("ui-state-disabled"),$("#prev").removeClass("ui-state-disabled")}),$("#pagenum").on("click",function(e){"LI"==e.target.tagName&&e.target.innerHTML!=d&&($("#pagenum").children().eq(d-1).removeClass("active"),d=parseInt(e.target.innerHTML),i()),1!=e.target.innerHTML&&e.target.innerHTML!=$("#pagenum").children().length?($("#lastpage").removeClass("ui-state-disabled"),$("#next").removeClass("ui-state-disabled"),$("#prev").removeClass("ui-state-disabled"),$("#firstpage").removeClass("ui-state-disabled")):1==e.target.innerHTML?($("#firstpage").addClass("ui-state-disabled"),$("#prev").addClass("ui-state-disabled")):e.target.innerHTML==$("#pagenum").children().length&&($("#lastpage").addClass("ui-state-disabled"),$("#next").addClass("ui-state-disabled"))}),i(),$("#rprice").on("click",function(){a="price",$("#normal").removeClass("active"),$("#rprice").addClass("active"),i()}),$("#normal").on("click",function(){a="id",$("#rprice").removeClass("active"),$("#normal").addClass("active"),i()}),$("#goodslist").on("click",".title",function(){location.href="detailpage.html?"+e+"&"+this.attributes.index.nodeValue}),$("#goodslist").on("click",".addcar",function(){location.href="detailpage.html?"+e+"&"+this.parentNode.parentNode.parentNode.attributes.index.nodeValue}),$(".golistpage").eq(0).on("click",function(){location.href="listpage.html?clothes"}),$(".golistpage").eq(1).on("click",function(){location.href="listpage.html?shoes"}),$(".golistpage").eq(2).on("click",function(){location.href="listpage.html?suit"}),$("#shoppingcar").on("click",function(){location.href="shoppingcar.html"})});